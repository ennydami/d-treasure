<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>D'Treasures ‚Ä¢ Cute Store</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Paystack Inline -->
  <script src="https://js.paystack.co/v1/inline.js"></script>
  <style>
    :root {
      --pink: #f472b6;
      --pink-dark: #ec4899;
      --rose: #fce7f3;
      --rose-deep: #f9a8d4;
    }
    body { font-family: 'Poppins', system-ui, -apple-system, Segoe UI, Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'; }
    .btn-pink { background: var(--pink); color:#fff; }
    .btn-pink:hover { background: var(--pink-dark); }
    .pill { background: var(--rose); color:#be185d; border-radius: 9999px; padding: 6px 14px; cursor: pointer; transition: all .2s; border:1px solid #fbcfe8;}
    .pill:hover { background: var(--rose-deep); color:#fff; }
    .tab-active { background: var(--pink); color:#fff; }
  </style>
</head>
<body class="bg-pink-50 text-gray-800">
  <!-- Header -->
  <header class="bg-pink-400 text-white p-4 flex justify-between items-center shadow-md">
    <h1 class="text-2xl font-extrabold tracking-tight">üíé D'Treasures</h1>
    <div class="flex items-center gap-2">
      <button onclick="openCart()" class="relative bg-white text-pink-600 px-4 py-2 rounded-full font-semibold shadow">
        üõí Cart <span id="cart-count" class="ml-1 bg-pink-600 text-white rounded-full px-2">0</span>
      </button>
    </div>
  </header>

  <!-- Category Filters -->
  <section class="p-4 flex flex-wrap gap-3 justify-center">
    <span class="pill" onclick="filterProducts('all')">All</span>
    <span class="pill" onclick="filterProducts('bags')">Bags</span>
    <span class="pill" onclick="filterProducts('shoes')">Shoes</span>
    <span class="pill" onclick="filterProducts('makeup')">Makeup</span>
    <span class="pill" onclick="filterProducts('perfume')">Perfume</span>
    <span class="pill" onclick="filterProducts('hair')">Hair</span>
    <span class="pill" onclick="filterProducts('clothes')">Clothes</span>
    <span class="pill" onclick="filterProducts('accessories')">Accessories</span>
    <span class="pill" onclick="filterProducts('skincare')">Skincare</span>
  </section>

  <!-- Products -->
  <main class="p-6">
    <div id="products-container" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6"></div>
  </main>

  <!-- Cart Modal -->
  <div id="cart-modal" class="fixed inset-0 hidden bg-black/40 backdrop-blur-sm flex justify-center items-center z-50">
    <div class="bg-white rounded-2xl p-6 w-[95%] max-w-lg shadow-xl">
      <div class="flex items-center justify-between mb-4">
        <h2 class="text-xl font-bold text-pink-600">Your Cart</h2>
        <button class="text-gray-500 hover:text-gray-700" onclick="closeCart()">‚úï</button>
      </div>
      <div id="cart-items" class="mb-4 max-h-80 overflow-y-auto"></div>
      <div class="flex justify-between items-center border-t pt-3">
        <span class="font-semibold">Total</span>
        <span class="font-extrabold text-pink-600" id="cart-total">‚Ç¶0</span>
      </div>
      <div class="mt-4 flex justify-between">
        <button onclick="closeCart()" class="px-4 py-2 rounded-full bg-gray-200">Close</button>
        <button onclick="openCheckout()" class="px-4 py-2 rounded-full btn-pink">Proceed to Checkout</button>
      </div>
    </div>
  </div>

  <!-- Checkout Modal -->
  <div id="checkout-modal" class="fixed inset-0 hidden bg-black/40 backdrop-blur-sm flex justify-center items-center z-50">
    <div class="bg-white rounded-2xl p-0 w-[95%] max-w-3xl shadow-xl overflow-hidden">
      <!-- Header -->
      <div class="p-5 bg-gradient-to-r from-pink-300 to-pink-400 text-white">
        <div class="flex items-center justify-between">
          <h2 class="text-xl font-extrabold">Secure Checkout</h2>
          <button class="text-white/90 hover:text-white" onclick="closeCheckout()">‚úï</button>
        </div>
        <p class="text-sm opacity-90 mt-1">Complete your order in two easy steps.</p>
      </div>

      <div class="grid md:grid-cols-5 gap-0">
        <!-- Left: Forms -->
        <div class="md:col-span-3 p-5 space-y-4">
          <!-- Customer Info -->
          <div class="bg-pink-50 border border-pink-100 rounded-xl p-4">
            <h3 class="font-bold text-pink-700 mb-3">Contact & Delivery</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
              <input id="cust-name" class="px-3 py-2 rounded-lg border" placeholder="Full Name" />
              <input id="cust-email" class="px-3 py-2 rounded-lg border" placeholder="Email (for receipt)" type="email"/>
              <input id="cust-phone" class="px-3 py-2 rounded-lg border" placeholder="Phone Number" />
              <input id="cust-address" class="px-3 py-2 rounded-lg border md:col-span-2" placeholder="Delivery Address" />
            </div>
          </div>

          <!-- Payment Tabs -->
          <div class="bg-white border rounded-xl">
            <div class="flex">
              <button id="tab-card" class="flex-1 py-2 text-center font-semibold tab-active rounded-tl-xl" onclick="switchTab('card')">üí≥ Card Payment</button>
              <button id="tab-bank" class="flex-1 py-2 text-center font-semibold rounded-tr-xl" onclick="switchTab('bank')">üè¶ Bank Transfer</button>
            </div>
            <!-- Card -->
            <div id="pane-card" class="p-4 space-y-3">
              <p class="text-sm text-gray-600">Pay securely with your card via Paystack.</p>
              <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                <input id="card-number" class="px-3 py-2 rounded-lg border md:col-span-2" placeholder="Card Number (1234 5678 9012 3456)" />
                <input id="card-cvv" class="px-3 py-2 rounded-lg border" placeholder="CVV" />
                <input id="card-exp" class="px-3 py-2 rounded-lg border" placeholder="MM/YY" />
              </div>
              <button onclick="payWithPaystack()" class="w-full btn-pink px-4 py-3 rounded-full font-semibold">Pay Now with Paystack</button>
              <p class="text-xs text-gray-500 text-center">You‚Äôll be redirected in a secure popup. No card details are stored on this site.</p>
            </div>
            <!-- Bank -->
            <div id="pane-bank" class="p-4 space-y-3 hidden">
              <div class="bg-pink-50 border border-pink-100 rounded-xl p-3">
                <p class="font-semibold">Account Name: <span class="text-pink-700">Adewuyi Oluwadamisola</span></p>
                <p class="font-semibold">Account Number: <span id="account-number" class="text-pink-700">8086099611</span>
                  <button onclick="copyAccountNumber()" class="ml-2 text-pink-600 underline">Copy</button>
                </p>
                <p class="text-sm text-gray-600 mt-2">After transfer, send your proof of payment on WhatsApp to confirm your order.</p>
              </div>
              <button onclick="openWhatsappProof()" class="w-full bg-green-500 hover:bg-green-600 text-white px-4 py-3 rounded-full font-semibold">Send Proof via WhatsApp</button>
              <button onclick="confirmBankIntent()" class="w-full bg-gray-800 hover:bg-black text-white px-4 py-3 rounded-full font-semibold">I Have Transferred</button>
            </div>
          </div>
        </div>

        <!-- Right: Summary -->
        <div class="md:col-span-2 p-5 bg-rose-50 border-l">
          <h3 class="font-bold text-pink-700 mb-3">Order Summary</h3>
          <ul id="summary-list" class="space-y-2 max-h-64 overflow-y-auto"></ul>
          <div class="mt-4 border-t pt-3 space-y-1">
            <div class="flex justify-between"><span>Subtotal</span><span id="sum-subtotal">‚Ç¶0</span></div>
            <div class="flex justify-between"><span>Delivery</span><span id="sum-delivery">‚Ç¶0</span></div>
            <div class="flex justify-between font-extrabold text-pink-700"><span>Total</span><span id="sum-total">‚Ç¶0</span></div>
          </div>
          <p class="text-xs text-gray-500 mt-3">Need help? Chat us on WhatsApp for quick support.</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Success Modal -->
  <div id="success-modal" class="fixed inset-0 hidden bg-black/40 backdrop-blur-sm flex justify-center items-center z-50">
    <div class="bg-white rounded-2xl p-6 w-[95%] max-w-md text-center shadow-xl">
      <h2 class="text-xl font-bold mb-2 text-pink-600">üéâ Payment Successful</h2>
      <p class="text-gray-700">Thank you for shopping with <span class="font-semibold">D'Treasures</span>!</p>
      <p class="text-sm text-gray-500 mt-1">Your order reference: <span id="success-ref" class="font-semibold"></span></p>
      <button onclick="closeSuccess()" class="mt-4 btn-pink px-5 py-2 rounded-full">OK</button>
    </div>
  </div>

  <script>
    /* -----------------------
       Product Catalog (40)
    ------------------------ */
    const products = [
      { id: 1, name: "Classic Tote Bag", price: 8000, category: "bags", image: "https://via.placeholder.com/300x220?text=Tote+Bag" },
      { id: 2, name: "Leather Handbag", price: 12000, category: "bags", image: "https://via.placeholder.com/300x220?text=Leather+Bag" },
      { id: 3, name: "Casual Sneakers", price: 9500, category: "shoes", image: "https://via.placeholder.com/300x220?text=Sneakers" },
      { id: 4, name: "Sport Shoes", price: 11000, category: "shoes", image: "https://via.placeholder.com/300x220?text=Sport+Shoes" },
      { id: 5, name: "Lip Gloss Set", price: 3500, category: "makeup", image: "https://via.placeholder.com/300x220?text=Lip+Gloss" },
      { id: 6, name: "Makeup Kit", price: 10000, category: "makeup", image: "https://via.placeholder.com/300x220?text=Makeup+Kit" },
      { id: 7, name: "Perfume - Rose Scent", price: 7500, category: "perfume", image: "https://via.placeholder.com/300x220?text=Perfume+Rose" },
      { id: 8, name: "Perfume - Ocean Breeze", price: 8500, category: "perfume", image: "https://via.placeholder.com/300x220?text=Perfume+Ocean" },
      { id: 9, name: "Hair Packer (Natural)", price: 5000, category: "hair", image: "https://via.placeholder.com/300x220?text=Hair+Natural" },
      { id:10, name: "Hair Packer (Synthetic)", price: 4000, category: "hair", image: "https://via.placeholder.com/300x220?text=Hair+Synthetic" },
      { id:11, name: "Casual T-Shirt", price: 4500, category: "clothes", image: "https://via.placeholder.com/300x220?text=T-Shirt" },
      { id:12, name: "Denim Jeans", price: 9500, category: "clothes", image: "https://via.placeholder.com/300x220?text=Jeans" },
      { id:13, name: "Maxi Dress", price: 12000, category: "clothes", image: "https://via.placeholder.com/300x220?text=Maxi+Dress" },
      { id:14, name: "Summer Gown", price: 8000, category: "clothes", image: "https://via.placeholder.com/300x220?text=Summer+Gown" },
      { id:15, name: "Men's Polo", price: 6000, category: "clothes", image: "https://via.placeholder.com/300x220?text=Men+Polo" },
      { id:16, name: "Formal Shirt", price: 7000, category: "clothes", image: "https://via.placeholder.com/300x220?text=Formal+Shirt" },
      { id:17, name: "Wrist Watch (Casual)", price: 6500, category: "accessories", image: "https://via.placeholder.com/300x220?text=Watch+Casual" },
      { id:18, name: "Wrist Watch (Luxury)", price: 15000, category: "accessories", image: "https://via.placeholder.com/300x220?text=Watch+Luxury" },
      { id:19, name: "Ladies Sandals", price: 5500, category: "shoes", image: "https://via.placeholder.com/300x220?text=Sandals" },
      { id:20, name: "Heels", price: 10000, category: "shoes", image: "https://via.placeholder.com/300x220?text=Heels" },
      { id:21, name: "Men‚Äôs Loafers", price: 12000, category: "shoes", image: "https://via.placeholder.com/300x220?text=Loafers" },
      { id:22, name: "Face Powder", price: 3000, category: "makeup", image: "https://via.placeholder.com/300x220?text=Face+Powder" },
      { id:23, name: "Foundation", price: 4000, category: "makeup", image: "https://via.placeholder.com/300x220?text=Foundation" },
      { id:24, name: "Concealer", price: 3500, category: "makeup", image: "https://via.placeholder.com/300x220?text=Concealer" },
      { id:25, name: "Necklace Set", price: 7000, category: "accessories", image: "https://via.placeholder.com/300x220?text=Necklace" },
      { id:26, name: "Bracelet", price: 2500, category: "accessories", image: "https://via.placeholder.com/300x220?text=Bracelet" },
      { id:27, name: "Earrings Pack", price: 4000, category: "accessories", image: "https://via.placeholder.com/300x220?text=Earrings" },
      { id:28, name: "Hand Chain", price: 3000, category: "accessories", image: "https://via.placeholder.com/300x220?text=Hand+Chain" },
      { id:29, name: "Clutch Purse", price: 6500, category: "bags", image: "https://via.placeholder.com/300x220?text=Clutch" },
      { id:30, name: "Backpack", price: 8500, category: "bags", image: "https://via.placeholder.com/300x220?text=Backpack" },
      { id:31, name: "Body Lotion", price: 2500, category: "skincare", image: "https://via.placeholder.com/300x220?text=Body+Lotion" },
      { id:32, name: "Face Cream", price: 2800, category: "skincare", image: "https://via.placeholder.com/300x220?text=Face+Cream" },
      { id:33, name: "Hand Cream", price: 1800, category: "skincare", image: "https://via.placeholder.com/300x220?text=Hand+Cream" },
      { id:34, name: "Scarf", price: 2000, category: "accessories", image: "https://via.placeholder.com/300x220?text=Scarf" },
      { id:35, name: "Cap", price: 2200, category: "accessories", image: "https://via.placeholder.com/300x220?text=Cap" },
      { id:36, name: "Sunglasses", price: 5000, category: "accessories", image: "https://via.placeholder.com/300x220?text=Sunglasses" },
      { id:37, name: "Wallet", price: 4000, category: "accessories", image: "https://via.placeholder.com/300x220?text=Wallet" },
      { id:38, name: "Belt", price: 3500, category: "accessories", image: "https://via.placeholder.com/300x220?text=Belt" },
      { id:39, name: "Ankle Boots", price: 15000, category: "shoes", image: "https://via.placeholder.com/300x220?text=Ankle+Boots" },
      { id:40, name: "Flip Flops", price: 2500, category: "shoes", image: "https://via.placeholder.com/300x220?text=Flip+Flops" }
    ];

    /* -----------------------
       Cart + Helpers
    ------------------------ */
    let cart = JSON.parse(localStorage.getItem("cart") || "[]");
    const N = (n) => n.toLocaleString('en-NG', { style: 'currency', currency: 'NGN' });
    const plainN = (n) => `‚Ç¶${n.toLocaleString('en-NG')}`;

    function saveCart(){ localStorage.setItem("cart", JSON.stringify(cart)); updateCartCount(); }
    function updateCartCount(){ document.getElementById("cart-count").textContent = cart.reduce((s,i)=>s+i.qty,0); }

    function addToCart(id){
      const p = products.find(x=>x.id===id);
      const it = cart.find(x=>x.id===id);
      if(it){ it.qty++; } else { cart.push({...p, qty:1}); }
      saveCart();
      toast(`${p.name} added to cart!`);
    }

    function renderProducts(filter="all"){
      const c = document.getElementById("products-container"); c.innerHTML = "";
      products.filter(p=>filter==="all"||p.category===filter).forEach(p=>{
        c.innerHTML += `
        <div class="bg-white rounded-2xl p-4 shadow hover:shadow-lg transition">
          <img src="${p.image}" alt="${p.name}" class="w-full h-40 object-cover rounded-xl mb-3">
          <h3 class="text-lg font-semibold">${p.name}</h3>
          <p class="text-pink-600 font-extrabold">${plainN(p.price)}</p>
          <button onclick="addToCart(${p.id})" class="mt-3 btn-pink px-4 py-2 rounded-full font-semibold w-full">‚ù§Ô∏è Add to Cart</button>
        </div>`;
      });
    }
    function filterProducts(cat){ renderProducts(cat); }

    /* -----------------------
       Cart Modal
    ------------------------ */
    function openCart(){ renderCart(); document.getElementById("cart-modal").classList.remove("hidden"); }
    function closeCart(){ document.getElementById("cart-modal").classList.add("hidden"); }

    function renderCart(){
      const box = document.getElementById("cart-items"); box.innerHTML = "";
      let total = 0;
      if(cart.length===0){ box.innerHTML = `<p class="text-center text-gray-500">Your cart is empty.</p>`; }
      cart.forEach((i,idx)=>{
        total += i.price * i.qty;
        box.innerHTML += `
          <div class="flex justify-between items-center mb-2 border-b pb-2">
            <div class="w-7/12">
              <p class="font-semibold">${i.name}</p>
              <p class="text-sm text-gray-500">${plainN(i.price)}</p>
            </div>
            <div class="flex items-center gap-2">
              <button onclick="changeQty(${idx},-1)" class="px-3 py-1 bg-gray-200 rounded-full">-</button>
              <span>${i.qty}</span>
              <button onclick="changeQty(${idx},1)" class="px-3 py-1 bg-gray-200 rounded-full">+</button>
              <button onclick="removeItem(${idx})" class="ml-2 text-red-500">‚úï</button>
            </div>
          </div>`;
      });
      document.getElementById("cart-total").textContent = plainN(total);
    }
    function changeQty(i,d){ cart[i].qty += d; if(cart[i].qty <= 0) cart.splice(i,1); saveCart(); renderCart(); }
    function removeItem(i){ cart.splice(i,1); saveCart(); renderCart(); }

    /* -----------------------
       Checkout UI
    ------------------------ */
    function openCheckout(){
      if(cart.length===0){ toast('Your cart is empty.'); return; }
      document.getElementById("checkout-modal").classList.remove("hidden");
      closeCart();
      renderSummary();
      switchTab('card'); // default
    }
    function closeCheckout(){ document.getElementById("checkout-modal").classList.add("hidden"); }

    function switchTab(which){
      const tabCard = document.getElementById('tab-card');
      const tabBank = document.getElementById('tab-bank');
      const paneCard = document.getElementById('pane-card');
      const paneBank = document.getElementById('pane-bank');
      if(which==='card'){
        tabCard.classList.add('tab-active'); tabBank.classList.remove('tab-active');
        paneCard.classList.remove('hidden'); paneBank.classList.add('hidden');
      } else {
        tabBank.classList.add('tab-active'); tabCard.classList.remove('tab-active');
        paneBank.classList.remove('hidden'); paneCard.classList.add('hidden');
      }
    }

    function renderSummary(){
      const ul = document.getElementById("summary-list");
      const subtotal = cart.reduce((s,i)=>s + i.price*i.qty, 0);
      const delivery = 0; // flat fee if you want later
      const total = subtotal + delivery;
      ul.innerHTML = "";
      cart.forEach(i=>{
        ul.innerHTML += `
          <li class="flex justify-between text-sm">
            <span>${i.name} x${i.qty}</span>
            <span>${plainN(i.price*i.qty)}</span>
          </li>`;
      });
      document.getElementById("sum-subtotal").textContent = plainN(subtotal);
      document.getElementById("sum-delivery").textContent = plainN(delivery);
      document.getElementById("sum-total").textContent = plainN(total);
    }

    /* -----------------------
       Bank Transfer helpers
    ------------------------ */
    function copyAccountNumber(){
      const acct = document.getElementById("account-number").textContent.trim();
      navigator.clipboard.writeText(acct);
      toast("Account number copied!");
    }

    function openWhatsappProof(){
      const name = (document.getElementById('cust-name').value||'').trim() || 'Customer';
      const phone = (document.getElementById('cust-phone').value||'').trim();
      const address = (document.getElementById('cust-address').value||'').trim();
      const list = cart.map(i=>`${i.name} x${i.qty} = ${plainN(i.price*i.qty)}`).join('%0A');
      const total = cart.reduce((s,i)=>s + i.price*i.qty, 0);
      const msg = `Hello D'Treasures,%0A%0AI have transferred for my order.%0A%0AName: ${encodeURIComponent(name)}%0APhone: ${encodeURIComponent(phone)}%0AAddress: ${encodeURIComponent(address)}%0A%0AItems:%0A${list}%0A%0ATotal: ${encodeURIComponent(plainN(total))}%0A%0AHere is my proof of payment.`;
      // Replace with your WhatsApp number in international format, e.g., 2348012345678
      const yourWhatsApp = '2348012345678';
      window.open(`https://wa.me/${yourWhatsApp}?text=${msg}`, '_blank');
    }

    function confirmBankIntent(){
      toast("Thanks! We‚Äôll verify your transfer shortly.");
      closeCheckout();
    }

    /* -----------------------
       Paystack (Real Payment)
    ------------------------ */
    function generateRef(){
      const t = Date.now().toString(36);
      const r = Math.random().toString(36).slice(2,8);
      return `DT${t}${r}`.toUpperCase();
    }

    function payWithPaystack(){
      // Validate customer info
      const name = (document.getElementById('cust-name').value||'').trim();
      const email = (document.getElementById('cust-email').value||'').trim();
      const phone = (document.getElementById('cust-phone').value||'').trim();
      const address = (document.getElementById('cust-address').value||'').trim();
      if(!name || !email){ toast("Please enter your name and email."); return; }

      const amountNGN = cart.reduce((s,i)=>s + i.price*i.qty, 0);
      if(amountNGN <= 0){ toast("Your cart is empty."); return; }

      const reference = generateRef();

      const handler = PaystackPop.setup({
        key: 'YOUR_PAYSTACK_PUBLIC_KEY', // TODO: replace with your real public key
        email,
        amount: amountNGN * 100, // kobo
        currency: 'NGN',
        ref: reference,
        metadata: {
          custom_fields: [
            { display_name: "Customer Name", variable_name: "customer_name", value: name },
            { display_name: "Phone", variable_name: "customer_phone", value: phone },
            { display_name: "Address", variable_name: "delivery_address", value: address },
            { display_name: "Items", variable_name: "order_items", value: cart.map(i=>`${i.name}x${i.qty}`).join(', ') }
          ]
        },
        callback: function(response){
          // Payment successful
          const ref = response.reference || reference;
          closeCheckout();
          cart = []; saveCart();
          document.getElementById('success-ref').textContent = ref;
          document.getElementById('success-modal').classList.remove('hidden');
        },
        onClose: function(){
          toast('Payment window closed.');
        }
      });
      handler.openIframe();
    }

    /* -----------------------
       Success Modal
    ------------------------ */
    function closeSuccess(){ document.getElementById("success-modal").classList.add("hidden"); }

    /* -----------------------
       Tiny Toast
    ------------------------ */
    function toast(msg){
      const id = 'toast-box';
      let box = document.getElementById(id);
      if(!box){
        box = document.createElement('div');
        box.id = id;
        box.className = 'fixed top-4 left-1/2 -translate-x-1/2 z-[9999]';
        document.body.appendChild(box);
      }
      const el = document.createElement('div');
      el.className = 'bg-gray-900 text-white px-4 py-2 rounded-full shadow mb-2';
      el.textContent = msg;
      box.appendChild(el);
      setTimeout(()=>{ el.remove(); }, 2500);
    }

    /* -----------------------
       Init
    ------------------------ */
    renderProducts();
    updateCartCount();
  </script>
</body>
</html>
